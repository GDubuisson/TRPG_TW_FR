<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/TRPG_TW_FR.mjs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/TRPG_TW_FR.mjs" />
              <option name="originalContent" value="import &quot;./module/data-model.mjs&quot;;&#10;import &quot;./module/document.mjs&quot;;&#10;&#10;Hooks.once('init', async function() {&#10;  console.log('TRPG_TW_FR | Initialisation du système The Witcher (FR)');&#10;&#10;  // Exemple de setting système&#10;  game.settings.register('trpg_tw_fr', 'demoMode', {&#10;    name: 'TRPG_TW_FR.Settings.DemoMode.Name',&#10;    hint: 'TRPG_TW_FR.Settings.DemoMode.Hint',&#10;    scope: 'world',&#10;    config: true,&#10;    type: Boolean,&#10;    default: false&#10;  });&#10;&#10;  // Définir des classes Document personnalisées fournies par module/data-model.mjs&#10;  if (typeof TRPGActor !== 'undefined') CONFIG.Actor.documentClass = TRPGActor;&#10;  if (typeof TRPGItem !== 'undefined') CONFIG.Item.documentClass = TRPGItem;&#10;&#10;  // Configuration minimale (exemples)&#10;  CONFIG.Combat.initiative = { formula: &quot;1d20&quot;, decimals: 2 };&#10;&#10;  console.log('TRPG_TW_FR | Configuration initiale appliquée');&#10;});&#10;&#10;Hooks.once('ready', async function() {&#10;  console.log('TRPG_TW_FR | Système prêt');&#10;&#10;  // Placez ici les migrations, preload de templates, ou initialisations qui nécessitent game.*&#10;  if (game.user.isGM) {&#10;    console.log('TRPG_TW_FR | Utilisateur GM détecté');&#10;  }&#10;});&#10;&#10;// Exporter les symboles si d'autres modules veulent les utiliser&#10;export { };&#10;" />
              <option name="updatedContent" value="import &quot;./module/data-model.mjs&quot;;&#13;&#10;import &quot;./module/document.mjs&quot;;&#13;&#10;&#13;&#10;Hooks.once('init', async function() {&#13;&#10;  console.log('TRPG_TW_FR | Initialisation du système The Witcher (FR)');&#13;&#10;&#13;&#10;  // Exemple de setting système&#13;&#10;  game.settings.register('trpg_tw_fr', 'demoMode', {&#13;&#10;    name: 'TRPG_TW_FR.Settings.DemoMode.Name',&#13;&#10;    hint: 'TRPG_TW_FR.Settings.DemoMode.Hint',&#13;&#10;    scope: 'world',&#13;&#10;    config: true,&#13;&#10;    type: Boolean,&#13;&#10;    default: false&#13;&#10;  });&#13;&#10;&#13;&#10;  // Définir des classes Document personnalisées fournies par module/data-model.mjs&#13;&#10;  if (typeof TRPGActor !== 'undefined') CONFIG.Actor.documentClass = TRPGActor;&#13;&#10;  if (typeof TRPGItem !== 'undefined') CONFIG.Item.documentClass = TRPGItem;&#13;&#10;&#13;&#10;  // Enregistrer les sheets personnalisées pour le type 'character'&#13;&#10;  if (typeof TRPGActorSheet !== 'undefined') {&#13;&#10;    Actors.registerSheet('trpg_tw_fr', TRPGActorSheet, { types: ['character'], makeDefault: true });&#13;&#10;  }&#13;&#10;  if (typeof TRPGItemSheet !== 'undefined') {&#13;&#10;    Items.registerSheet('trpg_tw_fr', TRPGItemSheet, { makeDefault: true });&#13;&#10;  }&#13;&#10;&#13;&#10;  // Configuration minimale (exemples)&#13;&#10;  CONFIG.Combat.initiative = { formula: &quot;1d20&quot;, decimals: 2 };&#13;&#10;&#13;&#10;  console.log('TRPG_TW_FR | Configuration initiale appliquée');&#13;&#10;});&#13;&#10;&#13;&#10;Hooks.once('ready', async function() {&#13;&#10;  console.log('TRPG_TW_FR | Système prêt');&#13;&#10;&#13;&#10;  // Placez ici les migrations, preload de templates, ou initialisations qui nécessitent game.*&#13;&#10;  if (game.user.isGM) {&#13;&#10;    console.log('TRPG_TW_FR | Utilisateur GM détecté');&#13;&#10;  }&#13;&#10;});&#13;&#10;&#13;&#10;// Exporter les symboles si d'autres modules veulent les utiliser&#13;&#10;export { };" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/module/data-model.mjs">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/module/data-model.mjs" />
              <option name="originalContent" value="/**&#10; * Classe Actor minimale pour le système The Witcher (FR)&#10; * Étend la classe Actor de Foundry et prépare les données système de base.&#10; */&#10;class TRPGActor extends Actor {&#10;  /** @override */&#10;  prepareData() {&#10;    super.prepareData();&#10;    // Utiliser this.system (ou this._source.system si nécessaire) pour accéder aux données système&#10;    const sys = this.system ?? (this._source &amp;&amp; this._source.system) ?? {};&#10;    // Ne rien faire si resources existe déjà&#10;    if (!sys.resources) {&#10;      // Merger directement dans this.system (modification sûre et attendue par Foundry)&#10;      // mergeObject modifie l'objet cible en place lorsqu'on lui passe this.system&#10;      mergeObject(this.system ?? (this._source.system = {}), {&#10;        resources: {&#10;          health: { value: 0, max: 0 },&#10;          power: { value: 0, max: 0 }&#10;        }&#10;      }, { inplace: true, overwrite: false });&#10;    }&#10;  }&#10;}&#10;&#10;/**&#10; * Classe Item minimale pour le système The Witcher (FR)&#10; */&#10;class TRPGItem extends Item {&#10;  /** @override */&#10;  prepareData() {&#10;    super.prepareData();&#10;    const sys = this.system ?? (this._source &amp;&amp; this._source.system) ?? {};&#10;    if (!sys.description) {&#10;      mergeObject(this.system ?? (this._source.system = {}), { description: &quot;&quot; }, { inplace: true, overwrite: false });&#10;    }&#10;  }&#10;}&#10;&#10;// Exposer globalement pour que TRPG_TW_FR.mjs puisse les référencer lors de l'init&#10;window.TRPGActor = TRPGActor;&#10;window.TRPGItem = TRPGItem;&#10;&#10;export { TRPGActor, TRPGItem };&#10;" />
              <option name="updatedContent" value="/**&#10; * Classe Actor minimale pour le système The Witcher (FR)&#10; * Étend la classe Actor de Foundry et prépare les données système de base.&#10; */&#10;class TRPGActor extends Actor {&#10;  /** @override */&#10;  prepareData() {&#10;    super.prepareData();&#10;    // Utiliser this.system (ou this._source.system si nécessaire) pour accéder aux données système&#10;    const sys = this.system ?? (this._source &amp;&amp; this._source.system) ?? {};&#10;    // Ne rien faire si resources existe déjà&#10;    if (!sys.resources) {&#10;      // Merger directement dans this.system (modification sûre et attendue par Foundry)&#10;      // mergeObject modifie l'objet cible en place lorsqu'on lui passe this.system&#10;      mergeObject(this.system ?? (this._source.system = {}), {&#10;        resources: {&#10;          health: { value: 0, max: 0 },&#10;          power: { value: 0, max: 0 }&#10;        }&#10;      }, { inplace: true, overwrite: false });&#10;    }&#10;  }&#10;}&#10;&#10;/**&#10; * Classe Item minimale pour le système The Witcher (FR)&#10; */&#10;class TRPGItem extends Item {&#10;  /** @override */&#10;  prepareData() {&#10;    super.prepareData();&#10;    const sys = this.system ?? (this._source &amp;&amp; this._source.system) ?? {};&#10;    if (!sys.description) {&#10;      mergeObject(this.system ?? (this._source.system = {}), { description: &quot;&quot; }, { inplace: true, overwrite: false });&#10;    }&#10;  }&#10;}&#10;&#10;// Exposer globalement pour que TRPG_TW_FR.mjs puisse les référencer lors de l'init&#10;window.TRPGActor = TRPGActor;&#10;window.TRPGItem = TRPGItem;&#10;&#10;// Référence explicite pour les analyseurs statiques : Foundry appelle prepareData dynamiquement&#10;// Cette ligne empêche les outils d'analyse de signaler &quot;Unused method prepareData&quot;.&#10;const _used = [TRPGActor, TRPGItem];&#10;&#10;export { TRPGActor, TRPGItem };" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/system.json">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/system.json" />
              <option name="originalContent" value="{&#10;  &quot;id&quot;: &quot;trpg_tw_fr&quot;,&#10;  &quot;title&quot;: &quot;The Witcher RPG - French&quot;,&#10;  &quot;description&quot;: &quot;Système du JdR The Witcher en français.&quot;,&#10;  &quot;version&quot;: &quot;0.0.1&quot;,&#10;  &quot;compatibleCoreVersion&quot;: &quot;12&quot;,&#10;  &quot;authors&quot;: [&#10;    { &quot;name&quot;: &quot;VotreNom&quot; }&#10;  ],&#10;  &quot;esmodules&quot;: [&quot;TRPG_TW_FR.mjs&quot;],&#10;  &quot;styles&quot;: [&quot;styles/system-styles.css&quot;],&#10;  &quot;packs&quot;: [&#10;    {&#10;      &quot;name&quot;: &quot;monsters&quot;,&#10;      &quot;label&quot;: &quot;Monstres&quot;,&#10;      &quot;type&quot;: &quot;Actor&quot;,&#10;      &quot;system&quot;: &quot;trpg_tw_fr&quot;&#10;    },&#10;    {&#10;      &quot;name&quot;: &quot;items&quot;,&#10;      &quot;label&quot;: &quot;Objets&quot;,&#10;      &quot;type&quot;: &quot;Item&quot;,&#10;      &quot;system&quot;: &quot;trpg_tw_fr&quot;&#10;    }&#10;  ],&#10;  &quot;languages&quot;: [&#10;    {&#10;      &quot;lang&quot;: &quot;fr&quot;,&#10;      &quot;name&quot;: &quot;Français&quot;,&#10;      &quot;path&quot;: &quot;lang/fr.json&quot;&#10;    }&#10;  ],&#10;  &quot;socket&quot;: false,&#10;  &quot;initiative&quot;: &quot;1d20&quot;,&#10;  &quot;grid&quot;: {&#10;    &quot;distance&quot;: 10,&#10;    &quot;units&quot;: &quot;m&quot;&#10;  },&#10;  &quot;primaryTokenAttribute&quot;: &quot;resources.health&quot;,&#10;  &quot;secondaryTokenAttribute&quot;: &quot;resources.power&quot;,&#10;  &quot;url&quot;: &quot;https://github.com/GDubuisson/TRPG_TW_FR&quot;,&#10;  &quot;manifest&quot;: &quot;https://raw.githubusercontent.com/GDubuisson/TRPG_TW_FR/main/system.json&quot;,&#10;  &quot;download&quot;: &quot;https://github.com/GDubuisson/TRPG_TW_FR/archive/refs/heads/main.zip&quot;&#10;}" />
              <option name="updatedContent" value="{&#13;&#10;  &quot;id&quot;: &quot;trpg_tw_fr&quot;,&#13;&#10;  &quot;title&quot;: &quot;The Witcher RPG - French&quot;,&#13;&#10;  &quot;description&quot;: &quot;Système du JdR The Witcher en français.&quot;,&#13;&#10;  &quot;version&quot;: &quot;0.0.1&quot;,&#13;&#10;  &quot;compatibleCoreVersion&quot;: &quot;12&quot;,&#13;&#10;  &quot;authors&quot;: [&#13;&#10;    { &quot;name&quot;: &quot;VotreNom&quot; }&#13;&#10;  ],&#13;&#10;  &quot;esmodules&quot;: [&quot;TRPG_TW_FR.mjs&quot;],&#13;&#10;  &quot;styles&quot;: [&quot;styles/system-styles.css&quot;],&#13;&#10;  &quot;packs&quot;: [&#13;&#10;    {&#13;&#10;      &quot;name&quot;: &quot;monsters&quot;,&#13;&#10;      &quot;label&quot;: &quot;Monstres&quot;,&#13;&#10;      &quot;type&quot;: &quot;Actor&quot;,&#13;&#10;      &quot;system&quot;: &quot;trpg_tw_fr&quot;&#13;&#10;    },&#13;&#10;    {&#13;&#10;      &quot;name&quot;: &quot;items&quot;,&#13;&#10;      &quot;label&quot;: &quot;Objets&quot;,&#13;&#10;      &quot;type&quot;: &quot;Item&quot;,&#13;&#10;      &quot;system&quot;: &quot;trpg_tw_fr&quot;&#13;&#10;    }&#13;&#10;  ],&#13;&#10;  &quot;languages&quot;: [&#13;&#10;    {&#13;&#10;      &quot;lang&quot;: &quot;fr&quot;,&#13;&#10;      &quot;name&quot;: &quot;Français&quot;,&#13;&#10;      &quot;path&quot;: &quot;lang/fr.json&quot;&#13;&#10;    }&#13;&#10;  ],&#13;&#10;  &quot;socket&quot;: false,&#13;&#10;  &quot;initiative&quot;: &quot;1d20&quot;,&#13;&#10;  &quot;grid&quot;: {&#13;&#10;    &quot;distance&quot;: 10,&#13;&#10;    &quot;units&quot;: &quot;m&quot;&#13;&#10;  },&#13;&#10;  &quot;primaryTokenAttribute&quot;: &quot;resources.health&quot;,&#13;&#10;  &quot;secondaryTokenAttribute&quot;: &quot;resources.power&quot;,&#13;&#10;  &quot;url&quot;: &quot;https://github.com/GDubuisson/TRPG_TW_FR&quot;,&#13;&#10;  &quot;manifest&quot;: &quot;https://raw.githubusercontent.com/GDubuisson/TRPG_TW_FR/main/system.json&quot;,&#13;&#10;  &quot;download&quot;: &quot;https://github.com/GDubuisson/TRPG_TW_FR/archive/refs/heads/main.zip&quot;,&#13;&#10;&#13;&#10;  &quot;actors&quot;: [&#13;&#10;    {&#13;&#10;      &quot;type&quot;: &quot;character&quot;,&#13;&#10;      &quot;name&quot;: &quot;Personnage&quot;,&#13;&#10;      &quot;img&quot;: &quot;icons/svg/mystery-man.svg&quot;&#13;&#10;    }&#13;&#10;  ]&#13;&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>